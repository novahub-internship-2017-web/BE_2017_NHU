<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
<meta charset="UTF-8" />
<title>Home</title>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <script src="/js/jquery.js"></script>
	  <script src="/js/myJavascript.js"></script>
      <script src="/js/bootstrap.min.js"></script>
      <link rel="stylesheet" href="/css/bootstrap.min.css"/>
      <link rel="stylesheet" href="/css/formStyle.css"/>
      <link rel="stylesheet" href="/css/myStyle.css"/>      
</head>
<body>  
    <div class="navbar navbar-static-top" id="header-part"></div>
	<div class="container main-container">
		<div class="panel panel-default">
	 		<div class="panel-body">
	 			 <div id="Content" ></div>
	 		</div>
	 		
	 	</div>
 	</div>
 	<script>
	 	window.onload = function ajaxGet(){
			$.ajax({
				type : "GET",
				url : "api/book/all",
				success: function(result){
					if(result.length > 0){
						$('#Content').html('<table id="tableList"><thead><tr>'+
								'<th>Mã số</th>'+
								'<th>Tiêu đề</th>'+
								'<th>Tác giả</th>'+
								'<th>Ngày tạo</th>'+
								'<th>Ngày cập nhật</th>'+
								'<th>Tác vụ</th>'+
								'</tr></thead>'+
								'<tbody></tbody></table>');
						$.each(result, function(i, book){
							
							var bookRow = '<tr>' +
								'<td>' + book.id + '</td>' +
								'<td>' + book.title + '</td>' +
								'<td>' + book.author + '</td>' +
								'<td>' + book.created_at + '</td>' +
								'<td>' + book.updated_at + '</td>' +
								'<td><a title="Chi tiết" href="/bookDetail/'+book.id+'"> Xem</a> </td>' +
								'<td><a title="Chi tiết" href="javascript:void(0)" onclick="getBookDetailPage('+book.id+')"> Chi tiết</a> </td>' +
							  '</tr>';
							
							$('#tableList tbody').append(bookRow);
							
				        });

						window.history.pushState('string', '', 'test');
					}else{
						$('#Content').html('Không có dữ liệu');
					}
				},
				error : function(e) {
					alert("ERROR: ", e);
					console.log("ERROR: ", e);
				}
			});	
		};
 	</script>
 	
</body>
</html>